import React from 'react';
import svgPaths from "../imports/svg-n2bmhf6w2b";
import imgImage11 from "figma:asset/c04b7dc5fda9f034b651189a7b822e50fd3c1575.png";

function Menu() {
  return (
    <div className="relative shrink-0 size-[24px]" data-name="menu">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 24 24">
        <g id="menu">
          <path d={svgPaths.p1458c100} fill="var(--fill-0, white)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function Frame3293() {
  return (
    <div className="content-stretch flex gap-[4px] items-center leading-[0] relative shrink-0 text-center text-nowrap text-white">
      <div className="flex flex-col justify-center relative shrink-0">
        <p className="leading-[18px] text-nowrap whitespace-pre text-sm font-semibold">Home</p>
      </div>
      <div className="flex flex-col justify-center relative shrink-0">
        <p className="leading-[18px] text-nowrap whitespace-pre text-sm font-semibold">/</p>
      </div>
      <div className="flex flex-col justify-center relative shrink-0">
        <p className="leading-[18px] text-nowrap whitespace-pre text-sm font-semibold">Project</p>
      </div>
    </div>
  );
}

function NavigationTabs() {
  return (
    <div className="box-border content-stretch flex gap-[8px] h-full items-center justify-center px-[16px] py-0 relative shrink-0" data-name="Navigation Tabs">
      <div className="flex flex-col justify-center leading-[0] relative shrink-0 text-[#757575] text-center text-nowrap">
        <p className="leading-[18px] whitespace-pre text-sm font-semibold">Fly</p>
      </div>
    </div>
  );
}

function NavigationTabs1() {
  return (
    <div className="box-border content-stretch flex gap-[8px] h-full items-center justify-center px-[16px] py-0 relative shrink-0" data-name="Navigation Tabs">
      <div className="flex flex-col justify-center leading-[0] relative shrink-0 text-[#757575] text-center text-nowrap">
        <p className="leading-[18px] whitespace-pre text-sm font-semibold">Upload</p>
      </div>
    </div>
  );
}

function NavigationTabs2() {
  return (
    <div className="box-border content-stretch flex gap-[8px] h-full items-center justify-center px-[16px] py-0 relative shrink-0" data-name="Navigation Tabs">
      <div className="flex flex-col justify-center leading-[0] relative shrink-0 text-[#757575] text-center text-nowrap">
        <p className="leading-[18px] whitespace-pre text-sm font-semibold">Explore</p>
      </div>
    </div>
  );
}

function NavigationTabs3() {
  return (
    <div className="box-border content-stretch flex gap-[8px] h-full items-center justify-center px-[16px] py-0 relative shrink-0" data-name="Navigation Tabs">
      <div className="flex flex-col justify-center leading-[0] relative shrink-0 text-[#757575] text-center text-nowrap">
        <p className="leading-[18px] whitespace-pre text-sm font-semibold">Dashboard</p>
      </div>
    </div>
  );
}

function NavigationTabs4() {
  return (
    <div className="box-border content-stretch flex gap-[8px] h-full items-center justify-center px-[16px] py-0 relative shrink-0" data-name="Navigation Tabs">
      <div className="flex flex-col justify-center leading-[0] relative shrink-0 text-[#757575] text-center text-nowrap">
        <p className="leading-[18px] whitespace-pre text-sm font-semibold">Report</p>
      </div>
    </div>
  );
}

function Magic() {
  return (
    <div className="relative shrink-0 size-[16px]" data-name="Magic">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 16 16">
        <g id="Magic">
          <path d={svgPaths.p1669bb80} fill="var(--fill-0, white)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function NavigationTabs5() {
  return (
    <div className="box-border content-stretch flex gap-[8px] h-full items-center justify-center px-[16px] py-0 relative shrink-0" data-name="Navigation Tabs">
      <div aria-hidden="true" className="absolute border-[#3f48e9] border-[0px_0px_4px] border-solid inset-0 pointer-events-none" />
      <Magic />
      <div className="flex flex-col justify-center leading-[0] relative shrink-0 text-center text-nowrap text-white">
        <p className="leading-[18px] whitespace-pre text-sm font-semibold">Progress AI</p>
      </div>
    </div>
  );
}

function TabBar() {
  return (
    <div className="content-stretch flex h-full items-center relative shrink-0" data-name="Tab bar">
      <NavigationTabs />
      <NavigationTabs1 />
      <NavigationTabs2 />
      <NavigationTabs3 />
      <NavigationTabs4 />
      <NavigationTabs5 />
    </div>
  );
}

function LeftContent() {
  return (
    <div className="content-stretch flex gap-[8px] h-full items-center relative shrink-0" data-name="Left Content">
      <Menu />
      <Frame3293 />
      <div className="flex flex-col justify-center leading-[0] relative shrink-0 text-center text-nowrap text-white">
        <p className="leading-[18px] whitespace-pre text-sm font-semibold">/</p>
      </div>
      <TabBar />
    </div>
  );
}

function ArrowDownS() {
  return (
    <div className="relative shrink-0 size-[16px]" data-name="arrow-down-s">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 16 16">
        <g id="arrow-down-s">
          <path d={svgPaths.p21637080} fill="var(--fill-0, #757575)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function TopNavSelect() {
  return (
    <div className="box-border content-stretch flex gap-[8px] h-[32px] items-center p-[10px] relative rounded-[2px] shrink-0 w-[112px]" data-name="Top Nav Select">
      <div aria-hidden="true" className="absolute border border-[#757575] border-solid inset-0 pointer-events-none rounded-[2px]" />
      <p className="basis-0 grow leading-[16px] min-h-px min-w-px relative shrink-0 text-white text-xs">Viewer</p>
      <ArrowDownS />
    </div>
  );
}

function Share() {
  return (
    <div className="relative shrink-0 size-[12px]" data-name="share">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 12 12">
        <g id="share">
          <path d={svgPaths.p367b6b80} fill="var(--fill-0, white)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function Button() {
  return (
    <div className="bg-[#3f48e9] box-border content-stretch flex gap-[4px] h-[32px] items-center justify-center px-[12px] py-[8px] relative rounded-[2px] shrink-0" data-name="Button">
      <Share />
      <div className="flex flex-col justify-center leading-[0] relative shrink-0 text-center text-nowrap text-white">
        <p className="leading-[16px] whitespace-pre text-xs">Share</p>
      </div>
    </div>
  );
}

function Upload() {
  return (
    <div className="relative shrink-0 size-[20px]" data-name="upload">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 20 20">
        <g id="upload">
          <path d={svgPaths.p36671f00} fill="var(--fill-0, white)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function Settings() {
  return (
    <div className="relative shrink-0 size-[20px]" data-name="settings">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 20 20">
        <g id="settings">
          <path d={svgPaths.p28289000} fill="var(--fill-0, white)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function Notification() {
  return (
    <div className="relative shrink-0 size-[20px]" data-name="notification">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 20 20">
        <g id="notification">
          <path d={svgPaths.p323f970} fill="var(--fill-0, white)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function TabBar1() {
  return (
    <div className="content-stretch flex gap-[16px] items-center relative shrink-0" data-name="Tab bar">
      <TopNavSelect />
      <Button />
      <Upload />
      <Settings />
      <Notification />
    </div>
  );
}

function TabBar2() {
  return (
    <div className="content-stretch flex gap-[14px] h-full items-center relative shrink-0" data-name="Tab bar">
      <TabBar1 />
    </div>
  );
}

function TopNavigationBar() {
  return (
    <div className="absolute bg-[#1f1f1f] box-border content-stretch flex h-[54px] items-center justify-between left-0 px-[24px] py-0 top-0 w-full" data-name="Top Navigation Bar">
      <LeftContent />
      <TabBar2 />
    </div>
  );
}

// Side Navigation Components
function Magic1() {
  return (
    <div className="relative shrink-0 size-[18px]" data-name="Magic">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 18 18">
        <g id="Magic">
          <path d={svgPaths.p15698c00} fill="var(--fill-0, #1F1F1F)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function DashboardFill1() {
  return (
    <div className="relative shrink-0 size-[18px]" data-name="dashboard-fill 1">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 18 18">
        <g id="dashboard-fill 1">
          <path d={svgPaths.p2fd20e00} id="Vector" stroke="var(--stroke-0, white)" strokeWidth="1.4" />
        </g>
      </svg>
    </div>
  );
}

function Floorplan() {
  return (
    <div className="relative shrink-0 size-[18px]" data-name="floorplan">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 18 18">
        <g id="floorplan">
          <path clipRule="evenodd" d={svgPaths.p3c042680} fill="var(--fill-0, #1F1F1F)" fillRule="evenodd" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function LineChart() {
  return (
    <div className="relative shrink-0 size-[18px]" data-name="line-chart">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 18 18">
        <g id="line-chart">
          <path d={svgPaths.p3600cdf0} fill="var(--fill-0, #1F1F1F)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function Camera() {
  return (
    <div className="relative shrink-0 size-[18px]" data-name="camera">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 18 18">
        <g id="camera">
          <path d={svgPaths.p2a2e6ed2} fill="var(--fill-0, #1F1F1F)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function Compare() {
  return (
    <div className="relative shrink-0 size-[18px]" data-name="compare">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 18 18">
        <g id="compare">
          <path clipRule="evenodd" d={svgPaths.p11be2e80} fill="var(--fill-0, #1F1F1F)" fillRule="evenodd" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function Sidenav() {
  return (
    <div className="absolute bg-[#f7f7f8] top-[54px] bottom-0 box-border content-stretch flex flex-col gap-[16px] items-center left-0 px-0 py-[8px] w-[48px]" data-name="sidenav">
      <div aria-hidden="true" className="absolute border-[#eeeeee] border-[0px_1px_0px_0px] border-solid inset-0 pointer-events-none" />
      <div className="content-stretch flex flex-col gap-[2px] items-center relative shrink-0">
        <div className="box-border content-stretch flex gap-[10px] items-center justify-center overflow-clip p-[8px] relative rounded-[4px] shrink-0 size-[28px]">
          <Magic1 />
        </div>
      </div>
      <div className="bg-[#3f48e9] content-stretch flex flex-col gap-[2px] items-center relative rounded-[2px] shrink-0">
        <div className="box-border content-stretch flex gap-[10px] items-center justify-center overflow-clip p-[8px] relative rounded-[4px] shrink-0 size-[28px]">
          <div className="content-stretch flex flex-col gap-[2px] items-center relative shrink-0">
            <div className="box-border content-stretch flex gap-[10px] items-center justify-center overflow-clip p-[8px] relative rounded-[4px] shrink-0 size-[28px]">
              <DashboardFill1 />
            </div>
          </div>
        </div>
      </div>
      <div className="content-stretch flex flex-col gap-[2px] items-center relative shrink-0">
        <div className="box-border content-stretch flex gap-[10px] items-center justify-center overflow-clip p-[8px] relative rounded-[4px] shrink-0 size-[28px]">
          <Floorplan />
        </div>
      </div>
      <div className="content-stretch flex flex-col gap-[2px] items-center relative shrink-0">
        <div className="box-border content-stretch flex gap-[10px] items-center justify-center overflow-clip p-[8px] relative rounded-[4px] shrink-0 size-[28px]">
          <LineChart />
        </div>
      </div>
      <div className="content-stretch flex flex-col gap-[2px] items-center relative shrink-0">
        <div className="box-border content-stretch flex gap-[10px] items-center justify-center overflow-clip p-[8px] relative rounded-[4px] shrink-0 size-[28px]">
          <Camera />
        </div>
      </div>
      <div className="content-stretch flex flex-col gap-[2px] items-center relative shrink-0">
        <div className="box-border content-stretch flex gap-[10px] items-center justify-center overflow-clip p-[8px] relative rounded-[4px] shrink-0 size-[28px]">
          <Compare />
        </div>
      </div>
      <div className="basis-0 content-stretch flex flex-col gap-[8px] grow items-center justify-end min-h-px min-w-px relative shrink-0">
        <div className="relative shrink-0 size-[34px]">
          <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 34 34">
            <g id="Frame 3836">
              <path d={svgPaths.p56d9ec0} fill="var(--fill-0, black)" id="Vector" />
            </g>
          </svg>
        </div>
      </div>
    </div>
  );
}

// Controls Components
function TimelineView1() {
  return (
    <div className="relative shrink-0 size-[18px]" data-name="timeline-view 1">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 18 18">
        <g id="timeline-view 1">
          <path d={svgPaths.p3a65acf0} fill="var(--fill-0, #3F48E9)" id="Vector" />
        </g>
      </svg>
    </div>
  );
}

function Icon() {
  return (
    <div className="relative shrink-0 size-[18px]" data-name="Icon">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 18 18">
        <g id="Icon">
          <path d={svgPaths.p2e806b00} fill="var(--fill-0, #1F1F1F)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function ViewControls() {
  return (
    <div className="relative rounded-[4px] shrink-0" data-name="View Controls">
      <div className="content-stretch flex gap-[10px] items-start overflow-clip relative">
        <div className="content-stretch flex h-[42px] items-start relative shrink-0">
          <div aria-hidden="true" className="absolute border-[#eeeeee] border-[0px_0px_0px_1px] border-solid bottom-0 left-[-0.5px] pointer-events-none right-0 top-0" />
          <div className="bg-white box-border content-stretch flex gap-[8px] h-full items-center justify-center px-[12px] py-0 relative shrink-0">
            <div aria-hidden="true" className="absolute border-[#3f48e9] border-[0px_0px_4px] border-solid inset-0 pointer-events-none" />
            <TimelineView1 />
          </div>
          <div className="bg-white box-border content-stretch flex gap-[8px] h-full items-center justify-center px-[12px] py-0 relative shrink-0">
            <Icon />
          </div>
        </div>
      </div>
      <div aria-hidden="true" className="absolute border border-[#eeeeee] border-solid inset-0 pointer-events-none rounded-[4px]" />
    </div>
  );
}

function Icon1() {
  return (
    <div className="relative shrink-0 size-[18px]" data-name="Icon">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 18 18">
        <g id="Icon">
          <path d={svgPaths.p3328a100} fill="var(--fill-0, #1F1F1F)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function Floorplan1() {
  return (
    <div className="relative shrink-0 size-[18px]" data-name="floorplan">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 18 18">
        <g id="floorplan">
          <path clipRule="evenodd" d={svgPaths.p3c042680} fill="var(--fill-0, #3F48E9)" fillRule="evenodd" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function Icon2() {
  return (
    <div className="relative shrink-0 size-[18px]" data-name="Icon">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 18 18">
        <g id="Icon">
          <path d={svgPaths.p2fdb4200} fill="var(--fill-0, #1F1F1F)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function ArrowDownS1() {
  return (
    <div className="relative shrink-0 size-[16px]" data-name="arrow-down-s">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 16 16">
        <g id="arrow-down-s">
          <path d={svgPaths.p21637080} fill="var(--fill-0, #757575)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function PrimarySwitcher({ isInteriorSelected, setIsInteriorSelected }) {
  return (
    <div className="h-[42px] relative rounded-[2px] shrink-0" data-name="Primary Switcher">
      <div className="content-stretch flex h-[42px] items-center overflow-clip relative">
        <div className="bg-white content-stretch flex h-[42px] items-start overflow-clip relative shrink-0">
          <button 
            onClick={() => setIsInteriorSelected(false)}
            className="bg-white box-border content-stretch flex gap-[8px] h-[42px] items-center justify-center p-[12px] relative shrink-0 w-[98px] hover:bg-gray-50"
          >
            {!isInteriorSelected && (
              <div aria-hidden="true" className="absolute border-[#3f48e9] border-[0px_0px_4px] border-solid inset-0 pointer-events-none" />
            )}
            <Icon1 />
            <div className={`flex flex-col justify-center leading-[0] relative shrink-0 text-center text-nowrap ${!isInteriorSelected ? 'text-[#3f48e9]' : 'text-[#1f1f1f]'}`}>
              <p className="leading-[18px] whitespace-pre text-sm font-semibold">Exterior</p>
            </div>
          </button>
          <button 
            onClick={() => setIsInteriorSelected(true)}
            className="bg-white box-border content-stretch flex gap-[8px] h-full items-center justify-center px-[12px] py-0 relative shrink-0 w-[98px] hover:bg-gray-50"
          >
            {isInteriorSelected && (
              <div aria-hidden="true" className="absolute border-[#3f48e9] border-[0px_0px_4px] border-solid inset-0 pointer-events-none" />
            )}
            <Floorplan1 />
            <div className={`flex flex-col justify-center leading-[0] relative shrink-0 text-center text-nowrap ${isInteriorSelected ? 'text-[#3f48e9]' : 'text-[#1f1f1f]'}`}>
              <p className="leading-[18px] whitespace-pre text-sm font-semibold">Interior</p>
            </div>
          </button>
        </div>
        {/* Level Selector - Always reserve space, but only show content when Interior is selected */}
        <div className="bg-white h-[42px] relative shrink-0 w-[205px]">
          {isInteriorSelected ? (
            <button className="box-border content-stretch flex gap-[4px] h-[42px] items-center overflow-clip px-[12px] py-[4px] relative w-[205px] hover:bg-gray-50">
              <div className="basis-0 content-stretch flex gap-[8px] grow items-center min-h-px min-w-px relative shrink-0">
                <Icon2 />
                <div className="basis-0 flex flex-col grow h-[18px] justify-center leading-[0] min-h-px min-w-px overflow-ellipsis overflow-hidden relative shrink-0 text-[#1f1f1f] text-nowrap">
                  <p className="[white-space-collapse:collapse] leading-[18px] overflow-ellipsis overflow-hidden text-sm font-semibold">Select Level</p>
                </div>
              </div>
              <ArrowDownS1 />
            </button>
          ) : (
            <div className="h-[42px] w-[205px] opacity-0" />
          )}
          {/* Only show the border when Interior is selected */}
          {isInteriorSelected && (
            <div aria-hidden="true" className="absolute border-[#eeeeee] border-[0px_0px_0px_1px] border-solid inset-0 pointer-events-none" />
          )}
        </div>
      </div>
      {isInteriorSelected && (
        <div aria-hidden="true" className="absolute border border-[#eeeeee] border-solid inset-[-1px] pointer-events-none rounded-[3px]" />
      )}
      {!isInteriorSelected && (
        <div aria-hidden="true" className="absolute border border-[#eeeeee] border-solid inset-[-1px] right-[205px] pointer-events-none rounded-[3px]" />
      )}
    </div>
  );
}

function ChevronLeft() {
  return (
    <div className="relative shrink-0 size-[18px]" data-name="chevron-left">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 18 18">
        <g id="chevron-left">
          <path d={svgPaths.p2a46ef00} fill="var(--fill-0, #1F1F1F)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function ArrowUpS() {
  return (
    <div className="relative size-[16px]" data-name="arrow-up-s">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 16 16">
        <g id="arrow-up-s">
          <path d={svgPaths.p1dabec20} fill="var(--fill-0, #757575)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function ChevronRight() {
  return (
    <div className="relative shrink-0 size-[18px]" data-name="chevron-right">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 18 18">
        <g id="chevron-right">
          <path d={svgPaths.p33572100} fill="var(--fill-0, #1F1F1F)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function DateControls() {
  return (
    <div className="relative rounded-[4px] shrink-0">
      <div className="content-stretch flex flex-col gap-[10px] items-start overflow-clip relative">
        <div className="content-stretch flex items-center justify-end overflow-clip relative shrink-0">
          <div className="bg-white box-border content-stretch flex gap-[10px] h-[41px] items-center justify-center px-[10px] py-[12px] relative shrink-0 w-[42px]">
            <div aria-hidden="true" className="absolute border-[#eeeeee] border-[0px_1px_0px_0px] border-solid inset-0 pointer-events-none" />
            <ChevronLeft />
          </div>
          <div className="bg-white box-border content-stretch flex gap-[8px] items-center px-[10px] py-[12px] relative shrink-0">
            <div aria-hidden="true" className="absolute border-[#eeeeee] border-[0px_1px_0px_0px] border-solid inset-0 pointer-events-none" />
            <div className="content-stretch flex gap-[8px] items-center relative shrink-0">
              <div className="flex flex-col justify-center leading-[0] relative shrink-0 text-[#1f1f1f] text-nowrap">
                <p className="leading-[18px] whitespace-pre text-sm font-semibold">29 April, 2025</p>
              </div>
            </div>
            <div className="flex items-center justify-center relative shrink-0">
              <div className="flex-none scale-y-[-100%]">
                <ArrowUpS />
              </div>
            </div>
          </div>
          <div className="bg-white box-border content-stretch flex gap-[10px] h-[41px] items-center justify-center px-[10px] py-[12px] relative shrink-0 w-[42px]">
            <ChevronRight />
          </div>
        </div>
      </div>
      <div aria-hidden="true" className="absolute border border-[#eeeeee] border-solid inset-0 pointer-events-none rounded-[4px]" />
    </div>
  );
}

function Search() {
  return (
    <div className="relative shrink-0 size-[16px]" data-name="search">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 16 16">
        <g id="search">
          <path d={svgPaths.p2459370} fill="var(--fill-0, #757575)" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function Filter() {
  return (
    <div className="relative shrink-0 size-[18px]" data-name="filter">
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 18 18">
        <g id="filter">
          <path clipRule="evenodd" d={svgPaths.p33bfec80} fill="var(--fill-0, #3F48E9)" fillRule="evenodd" id="Vector path" />
        </g>
      </svg>
    </div>
  );
}

function SearchAndFilter({ hasFiltersApplied, setHasFiltersApplied }) {
  const [isFilterMenuOpen, setIsFilterMenuOpen] = React.useState(false);
  const [selectedFilters, setSelectedFilters] = React.useState({
    trades: [],
    status: [],
    levels: [],
    contractors: []
  });

  // Get dynamic filter options from the data
  const filterOptions = React.useMemo(() => {
    try {
      const data = require('../data/scheduleData.js');
      return {
        trades: data.getAllTrades(),
        status: ['complete', 'inprogress', 'delayed', 'pending'],
        levels: data.getAllLevels(),
        contractors: data.getAllContractors()
      };
    } catch (error) {
      return {
        trades: ['Framing', 'Insulation', 'Mechanical', 'Plumbing', 'Electrical', 'Finishes'],
        status: ['complete', 'inprogress', 'delayed', 'pending'],
        levels: ['Level 1', 'Level 2', 'Level 3'],
        contractors: []
      };
    }
  }, []);

  const handleFilterChange = (category, value) => {
    setSelectedFilters(prev => {
      const newFilters = { ...prev };
      if (newFilters[category].includes(value)) {
        newFilters[category] = newFilters[category].filter(item => item !== value);
      } else {
        newFilters[category] = [...newFilters[category], value];
      }
      return newFilters;
    });
  };

  // Update parent state when filters change
  React.useEffect(() => {
    const hasAnyFilters = Object.values(selectedFilters).some(arr => arr.length > 0);
    setHasFiltersApplied(hasAnyFilters);
  }, [selectedFilters, setHasFiltersApplied]);

  const getTotalFilterCount = () => {
    return Object.values(selectedFilters).reduce((total, arr) => total + arr.length, 0);
  };

  const clearAllFilters = () => {
    setSelectedFilters({ trades: [], status: [], levels: [], contractors: [] });
    setHasFiltersApplied(false);
  };

  return (
    <div className="relative rounded-[4px] shrink-0">
      <div className="content-stretch flex gap-[10px] items-start overflow-clip relative">
        <div className="bg-white box-border content-stretch flex gap-[10px] items-center px-[10px] py-[12px] relative rounded-bl-[4px] rounded-tl-[4px] shrink-0 w-[300px]">
          <Search />
          <input 
            type="text"
            placeholder="Search locations and trades"
            className="leading-[normal] relative shrink-0 text-[#757575] text-nowrap text-sm bg-transparent border-none outline-none flex-1"
          />
        </div>
        <div className="relative">
          <button 
            onClick={() => setIsFilterMenuOpen(!isFilterMenuOpen)}
            className="bg-white box-border content-stretch flex gap-[8px] items-center justify-center px-[10px] py-[12px] relative shrink-0 w-[42px] hover:bg-gray-50"
          >
            <div aria-hidden="true" className="absolute border border-[#eeeeee] border-solid inset-0 pointer-events-none rounded-[0px_4px_4px_0px]" />
            <Filter />
          </button>
          {/* Filter count badge - Positioned on top of filter button */}
          {hasFiltersApplied && getTotalFilterCount() > 0 && (
            <div className="absolute -top-1 -right-1 bg-[#3f48e9] flex items-center justify-center min-w-[16px] h-[16px] px-[4px] rounded-full z-10">
              <p className="leading-[normal] text-white text-xs font-medium">{getTotalFilterCount()}</p>
            </div>
          )}
        </div>
      </div>
      <div aria-hidden="true" className="absolute border border-[#eeeeee] border-solid inset-0 pointer-events-none rounded-[4px]" />
      
      {/* Filter Menu */}
      {isFilterMenuOpen && (
        <div className="absolute top-full right-0 mt-2 w-80 bg-white border border-[#eeeeee] rounded-[4px] shadow-lg z-50">
          <div className="p-4">
            <div className="flex items-center justify-between mb-4">
              <h3 className="text-sm font-semibold text-[#1f1f1f]">Filter Options</h3>
              {getTotalFilterCount() > 0 && (
                <button 
                  onClick={clearAllFilters}
                  className="text-xs text-[#3f48e9] hover:underline"
                >
                  Clear All
                </button>
              )}
            </div>
            
            {Object.entries(filterOptions).map(([category, options]) => (
              <div key={category} className="mb-4">
                <h4 className="text-xs font-semibold text-[#757575] uppercase tracking-wide mb-2">
                  {category}
                </h4>
                <div className="space-y-2">
                  {options.map(option => {
                    // Format display names for status
                    const displayName = category === 'status' ? 
                      option.charAt(0).toUpperCase() + option.slice(1).replace(/([A-Z])/g, ' $1') :
                      option;
                      
                    return (
                      <label key={option} className="flex items-center gap-2 cursor-pointer">
                        <input
                          type="checkbox"
                          checked={selectedFilters[category].includes(option)}
                          onChange={() => handleFilterChange(category, option)}
                          className="w-4 h-4 text-[#3f48e9] border-[#eeeeee] rounded focus:ring-[#3f48e9]"
                        />
                        <span className="text-sm text-[#1f1f1f]">{displayName}</span>
                      </label>
                    );
                  })}
                </div>
              </div>
            ))}
            
            <div className="flex gap-2 pt-4 border-t border-[#eeeeee]">
              <button 
                onClick={() => setIsFilterMenuOpen(false)}
                className="flex-1 px-3 py-2 text-sm border border-[#eeeeee] rounded-[2px] hover:bg-gray-50"
              >
                Cancel
              </button>
              <button 
                onClick={() => setIsFilterMenuOpen(false)}
                className="flex-1 px-3 py-2 text-sm bg-[#3f48e9] text-white rounded-[2px] hover:bg-[#3440d9]"
              >
                Apply Filters
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

function Controls() {
  const [isInteriorSelected, setIsInteriorSelected] = React.useState(true);
  const [hasFiltersApplied, setHasFiltersApplied] = React.useState(false);

  return (
    <div className="absolute left-[75px] right-[24px] top-[76px] h-[42px]">
      <div className="w-full h-full flex items-center justify-between gap-4">
        {/* Left side - Grouped Controls */}
        <div className="flex gap-[8px] items-center shrink-0">
          <ViewControls />
          <div className="flex items-center">
            <PrimarySwitcher isInteriorSelected={isInteriorSelected} setIsInteriorSelected={setIsInteriorSelected} />
          </div>
        </div>
        
        {/* Center - Date Controls */}
        <div className="flex-1 flex justify-center">
          <DateControls />
        </div>
        
        {/* Right side - Search and Filter */}
        <div className="flex items-center shrink-0">
          <SearchAndFilter hasFiltersApplied={hasFiltersApplied} setHasFiltersApplied={setHasFiltersApplied} />
        </div>
      </div>
    </div>
  );
}

// Timeline Components
function Timeline() {
  // Import schedule data
  const { scheduleData, statusColors } = React.useMemo(() => {
    // This will be replaced with actual import once the data file is created
    try {
      const data = require('../data/scheduleData.js');
      return {
        scheduleData: data.scheduleData,
        statusColors: data.statusColors
      };
    } catch (error) {
      // Fallback data if the file doesn't exist yet
      return {
        scheduleData: {
          timeline: { totalDays: 30 },
          locations: []
        },
        statusColors: {
          complete: '#22c55e',
          inprogress: '#3b82f6', 
          delayed: '#f97316',
          pending: '#9ca3af'
        }
      };
    }
  }, []);

  const days = Array.from({ length: scheduleData.timeline.totalDays }, (_, i) => i + 1);
  const locations = scheduleData.locations;

  const getStatusColor = (status) => {
    const color = statusColors[status] || statusColors.pending;
    // Convert hex to Tailwind bg class
    switch (status) {
      case 'complete': return 'bg-[#22c55e]'; // Green
      case 'inprogress': return 'bg-[#3b82f6]'; // Blue
      case 'delayed': return 'bg-[#f97316]'; // Orange
      default: return 'bg-[#9ca3af]'; // Gray
    }
  };

  // Flatten the hierarchical structure for table rows
  const flattenRows = (items, level = 0) => {
    const rows = [];
    items.forEach(item => {
      rows.push({ ...item, level });
      if (item.children) {
        rows.push(...flattenRows(item.children, level + 1));
      }
    });
    return rows;
  };

  const allRows = flattenRows(locations);

  return (
    <div className="absolute top-[176px] left-[75px] right-[24px] bottom-[24px] bg-white border border-[#eeeeee] rounded-[4px] overflow-hidden">
      {/* Table Container */}
      <div className="h-full flex flex-col">
        {/* Header */}
        <div className="flex border-b border-[#eeeeee] bg-[#f7f7f8]">
          {/* Fixed Column Header */}
          <div className="w-[320px] px-4 py-3 border-r border-[#eeeeee] bg-[#f7f7f8] sticky left-0 z-20">
            <h3 className="text-sm font-semibold text-[#1f1f1f]">Construction Schedule</h3>
          </div>
          {/* Scrollable Timeline Header */}
          <div className="flex min-w-max">
            {days.map((day) => (
              <div key={day} className="w-[40px] px-2 py-3 text-center border-r border-[#eeeeee] bg-[#f7f7f8]">
                <span className="text-xs text-[#757575] font-medium">{day}</span>
              </div>
            ))}
          </div>
        </div>

        {/* Table Body */}
        <div className="flex-1 overflow-auto">
          <div className="relative">
            {allRows.map((row, index) => {
              const paddingLeft = row.level * 20;
              
              return (
                <div key={`${row.name}-${index}`} className="flex border-b border-[#eeeeee] hover:bg-[#f9f9fa] group">
                  {/* Fixed Column */}
                  <div 
                    className="w-[320px] px-4 py-3 border-r border-[#eeeeee] bg-white sticky left-0 z-10 group-hover:bg-[#f9f9fa]"
                    style={{ paddingLeft: `${16 + paddingLeft}px` }}
                  >
                    <div className="flex items-center gap-2">
                      {row.children && (
                        <span className="text-[#757575] text-xs">▼</span>
                      )}
                      <span className={`text-sm ${row.type === 'level' ? 'font-semibold text-[#1f1f1f]' : row.type === 'zone' ? 'font-medium text-[#1f1f1f]' : 'text-[#1f1f1f]'}`}>
                        {row.name}
                      </span>
                      {row.status && (
                        <div className={`w-2 h-2 rounded-full ${getStatusColor(row.status)}`} />
                      )}
                    </div>
                  </div>
                  
                  {/* Scrollable Timeline */}
                  <div className="flex min-w-max relative">
                    {days.map((day) => (
                      <div key={day} className="w-[40px] h-[48px] border-r border-[#eeeeee] relative">
                        {/* Timeline bar for trades */}
                        {row.status && day >= row.startDay && day < row.startDay + row.duration && (
                          <div 
                            className={`absolute top-1/2 transform -translate-y-1/2 h-6 rounded-sm ${getStatusColor(row.status)} opacity-80`}
                            style={{
                              left: day === row.startDay ? '4px' : '0px',
                              right: day === row.startDay + row.duration - 1 ? '4px' : '0px',
                              borderRadius: day === row.startDay ? '4px 0 0 4px' : day === row.startDay + row.duration - 1 ? '0 4px 4px 0' : '0px'
                            }}
                          />
                        )}
                      </div>
                    ))}
                  </div>
                </div>
              );
            })}
          </div>
        </div>
      </div>
    </div>
  );
}

export default function ConstructionSchedule() {
  return (
    <div className="bg-white relative size-full" data-name="Construction Schedule">
      <TopNavigationBar />
      <Sidenav />
      <Controls />
      <Timeline />
    </div>
  );
}